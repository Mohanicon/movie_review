{"ast":null,"code":"var _jsxFileName = \"E:\\\\user\\\\client\\\\src\\\\Component\\\\Rating.js\";\nimport Header from '../Component/header';\nimport UserLogin from '../Component/userlogin';\nimport { useLocation } from 'react-router-dom';\nimport React from 'react';\nimport { Outlet, Link } from \"react-router-dom\";\nimport Session from '../session/session';\nimport { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport Movies from './movies';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nAxios.defaults.withCredentials = true;\n\nclass Rating extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n    this.state = {\n      stars: [],\n      rating: 0,\n      value: '',\n      hovered: 0,\n      message: '',\n      selectedIcon: \"★\",\n      deselectedIcon: \"☆\"\n    }; // var movie = Movies.location.state.sl;\n\n    let outOf = props.outOf ? props.outOf : 10;\n\n    for (var i = 0; i < outOf; i++) {\n      this.state.stars.push(i + 1);\n    } //return this.state.rating;\n\n  }\n\n  changeRating(newRating) {\n    this.setState({\n      rating: newRating\n    });\n    if (this.props.onChange) this.props.onChange(newRating);\n  }\n\n  hoverRating(rating) {\n    this.setState({\n      hovered: rating\n    });\n  }\n\n  setstatus(message) {\n    this.setState({\n      message: message\n    });\n  }\n\n  handleChange(event) {\n    this.setState({\n      value: event.target.value\n    });\n  }\n\n  submit() {\n    const role = Session.getrole();\n    const mid = Session.getmid();\n    const session = sessionStorage.getItem(\"key\"); //form submit\n    //alert(this.state.rating+\" \"+this.state.value+\" \"+mid+\" \"+role+\" \"+session)\n\n    if (this.state.value != \"\" && this.state.rating > 0) {\n      Axios.post(\"http://localhost:3001/rating\", {\n        rating: this.state.rating,\n        value: this.state.value,\n        movie_id: mid,\n        user_role: role,\n        user_id: session\n      }).then(response => {\n        if (response.data.message == \"success\") {\n          this.setstatus(\"Review Submited\");\n        } else {\n          this.setstatus(\"You Cannot post more than one Review on a Movie\");\n        }\n      });\n    } else {\n      this.setstatus(\"Please Give a Valid rating\");\n    }\n  }\n\n  render() {\n    const {\n      stars,\n      rating,\n      hovered,\n      deselectedIcon,\n      selectedIcon\n    } = this.state; //   <h5>{this.state.stars.length}</h5>\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"contact-form text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rating2\",\n        children: [/*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), stars.map(star => {\n          return /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                cursor: 'pointer'\n              },\n              onClick: () => {\n                this.changeRating(star);\n              },\n              onMouseEnter: () => {\n                this.hoverRating(star);\n              },\n              onMouseLeave: () => {\n                this.hoverRating(0);\n              },\n              children: rating < star ? hovered < star ? deselectedIcon : selectedIcon : selectedIcon\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 17\n            }, this)\n          }, void 0, false);\n        }), /*#__PURE__*/_jsxDEV(\"h6\", {\n          children: [rating, \"/10\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        class: \"\",\n        name: \"text\",\n        alue: this.state.value,\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"alert-danger\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: this.state.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"button\",\n        class: \"text-centre\",\n        name: \"submit\",\n        value: \"Submit\",\n        onClick: () => this.submit()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Rating;","map":{"version":3,"names":["Header","UserLogin","useLocation","React","Outlet","Link","Session","useState","useEffect","Axios","Movies","defaults","withCredentials","Rating","Component","constructor","props","handleChange","bind","state","stars","rating","value","hovered","message","selectedIcon","deselectedIcon","outOf","i","push","changeRating","newRating","setState","onChange","hoverRating","setstatus","event","target","submit","role","getrole","mid","getmid","session","sessionStorage","getItem","post","movie_id","user_role","user_id","then","response","data","render","map","star","cursor"],"sources":["E:/user/client/src/Component/Rating.js"],"sourcesContent":["import Header from '../Component/header'\nimport UserLogin from '../Component/userlogin'\nimport { useLocation } from 'react-router-dom';\nimport React from 'react'\nimport { Outlet, Link } from \"react-router-dom\";\nimport Session from '../session/session';\nimport { useState, useEffect } from 'react'\nimport Axios from 'axios';\nimport Movies from './movies'\nAxios.defaults.withCredentials = true;\n\nclass Rating extends React.Component {\n \n  constructor(props) {\n    super(props);\n    this.handleChange = this.handleChange.bind(this);\n    this.state = {\n      stars: [],\n      rating: 0,\n      value: '',\n      hovered: 0,\n      message:'',\n      selectedIcon: \"★\",\n      deselectedIcon: \"☆\"\n    };\n   // var movie = Movies.location.state.sl;\n    let outOf = props.outOf ? props.outOf : 10;\n\n    for (var i = 0; i < outOf; i++) {\n      this.state.stars.push(i + 1);\n    }\n    //return this.state.rating;\n  }\n\n  changeRating(newRating) {\n    this.setState({\n      rating: newRating\n    });\n\n    if (this.props.onChange)\n      this.props.onChange(newRating);\n  }\n\n  hoverRating(rating) {\n    this.setState({\n      hovered: rating\n    });\n  }\n  setstatus(message) {\n    this.setState({message: message});\n  }\n\n  handleChange(event) {\n    this.setState({ value: event.target.value });\n  }\n  \n  submit() {\n     \n    const role = Session.getrole();\n    const mid = Session.getmid();\n    const session = sessionStorage.getItem(\"key\");\n    //form submit\n    //alert(this.state.rating+\" \"+this.state.value+\" \"+mid+\" \"+role+\" \"+session)\n    if(this.state.value != \"\" && this.state.rating > 0)\n    {\n      Axios.post(\"http://localhost:3001/rating\", {\n        rating: this.state.rating,\n        value: this.state.value,\n        movie_id:mid,\n        user_role:role,\n        user_id:session,\n    }).then((response) => {\n        if (response.data.message == \"success\") {\n         this.setstatus(\"Review Submited\");\n        }\n        else {\n            this.setstatus(\"You Cannot post more than one Review on a Movie\");\n\n        }\n    });\n    }\n    else{\n     this.setstatus(\"Please Give a Valid rating\");\n    }\n  }\n  \n  render() {\n\n    const { stars, rating, hovered, deselectedIcon, selectedIcon } = this.state;\n\n    //   <h5>{this.state.stars.length}</h5>\n    return (\n      <div class=\"contact-form text-center\">\n        <div className=\"rating2\">\n          <hr />\n\n\n          {//stars hooks\n          }\n          {stars.map(star => {\n            return (\n              <>\n                <span\n\n                  style={{ cursor: 'pointer' }}\n                  onClick={() => { this.changeRating(star); }}\n                  onMouseEnter={() => { this.hoverRating(star); }}\n                  onMouseLeave={() => { this.hoverRating(0); }}\n                >\n                  {rating < star ?\n                    hovered < star ? deselectedIcon : selectedIcon\n                    :\n                    selectedIcon\n                  }\n\n                </span>\n\n              </>\n\n\n            );\n          })}\n          <h6 >{rating}/10</h6>\n        </div>\n        <textarea class=\"\"\n          name=\"text\"\n          alue={this.state.value}\n          onChange={this.handleChange} ></textarea>\n        <div class=\"alert-danger\" >\n        </div>\n        <h4>{this.state.message}</h4>\n        <input type=\"button\" class=\"text-centre\"\n          name=\"submit\" value=\"Submit\"\n          onClick={() => this.submit()} />\n\n      </div>\n    );\n  }\n\n}\nexport default Rating;"],"mappings":"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"},"metadata":{},"sourceType":"module"}